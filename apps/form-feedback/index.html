<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="https://portal.husqvarnagroup.com/static/b2b/assets/with-name.4d5589ae.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Husqvarna Feedback Form" />
    <title>Husqvarna Feedback Form</title>
    <!-- Direct debug script for early error detection -->
    <script>
      console.log('STARTUP: Initial script execution');
      window.addEventListener('error', function(e) {
        console.error('GLOBAL ERROR:', e.error || e.message);
        document.body.innerHTML += '<div style="color: red; background: #ffeeee; padding: 20px; margin: 20px; border: 1px solid red; position: fixed; top: 0; left: 0; right: 0; z-index: 1000;">' + 
          '<h3>Error Detected:</h3>' +
          '<pre>' + (e.error?.stack || e.message) + '</pre>' +
          '</div>';
      });
    </script>
    <!-- Debug tools for production troubleshooting -->
    <script src="/debug-client.js" defer></script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <!-- Debug information will be displayed here if JS fails to load -->
    <div id="debug-info" style="display: none; margin-top: 20px; padding: 20px; background-color: #fff3f3; border: 1px solid #ffcccb;">
      <h3>Debug Information</h3>
      <pre id="debug-content"></pre>
    </div>
    <script>
      // This script runs immediately and doesn't depend on module loading
      try {
        const debugInfo = {
          timestamp: new Date().toISOString(),
          url: window.location.href,
          userAgent: navigator.userAgent,
          scripts: Array.from(document.querySelectorAll('script')).map(s => s.src || 'inline')
        };
        
        console.log('Debug info:', debugInfo);
        
        // Check if modules load correctly
        setTimeout(() => {
          const root = document.getElementById('root');
          if (!root || (root.innerHTML === '' || root.children.length === 0)) {
            console.error('React not rendering after 5 seconds');
            document.getElementById('debug-info').style.display = 'block';
            document.getElementById('debug-content').textContent = 
              'Error: React app not rendering\n\n' + JSON.stringify(debugInfo, null, 2);
          }
        }, 5000);
      } catch (e) {
        console.error('Error in debug script:', e);
      }
    </script>
    <noscript>
      <div style="max-width: 600px; margin: 0 auto; padding: 2rem; text-align: center;">
        <h2>JavaScript is required</h2>
        <p>Please enable JavaScript to use this application.</p>
      </div>
    </noscript>
  </body>
</html>
